//Generated by FuseIT WSDL2Apex

@isTest
global class OnbeWsPrepaidHttpMock implements WebServiceMock{

    // Constants
    private static final String uriAccountManagementPrepaidWs = 'http://ws.accountmanagementapi.prepaid.citi.com';
    private static final String uriXmlSoapSchema = 'http://schemas.xmlsoap.org/soap/envelope/';

	global HTTPResponse respond(HTTPRequest req){
		HttpResponse res = new HttpResponse();
		res.setHeader('Content-Type', 'application/json');
		DOM.Document responseDoc = new DOM.Document();
		DOM.XmlNode envelope = responseDoc.createRootElement('Envelope', uriXmlSoapSchema, 's');
		DOM.XmlNode bodyNode = envelope.addChildElement('Body', uriXmlSoapSchema, null);

		DOM.Document reqDoc = req.getBodyDocument();
		DOM.XmlNode rootNode = reqDoc.getRootElement();
		DOM.XmlNode reqBodyNode = rootNode.getChildElement('Body', uriXmlSoapSchema);
		DOM.XmlNode[] methodNode = reqBodyNode.getChildElements();
		if(methodNode[0].getName() == 'createAccount'){
			DOM.XmlNode ResponseNode = bodyNode.addChildElement('createAccountReturn', uriAccountManagementPrepaidWs, null);
		}
		res.setBody(responseDoc.toXmlString());
		res.setStatusCode(200);
		return res;
	}

	public void doInvoke(
		Object stub,
		Object request,
		Map<String, Object> response,
		String endpoint,
		String soapAction,
		String requestName,
		String responseNS,
		String responseName,
		String responseType) {

		System.debug(LoggingLevel.INFO, 'AsyncOnbeWsPrepaidMock.doInvoke() - ' +
			'\n request: ' + request +
			'\n response: ' + response +
			'\n endpoint: ' + endpoint +
			'\n soapAction: ' + soapAction +
			'\n requestName: ' + requestName +
			'\n responseNS: ' + responseNS +
			'\n responseName: ' + responseName +
			'\n responseType: ' + responseType);
	}
}
